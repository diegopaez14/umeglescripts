// ==UserScript==
// @name         ChatMsg DisableDesconect UHM
// @namespace    http://tampermonkey.net/
// @version      2025-01-21
// @description  try to take over the world!
// @author       You
// @match        https://uhmegle.com/text/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=uhmegle.com
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // Seleccionamos el elemento a observar
var textoDelBoton = document.querySelector('.bottomButton.outlined.skipButton').getElementsByClassName("mainText")[0];
var chatmsg = document.getElementsByClassName('messageInput')[0];
// Creamos el MutationObserver
const observer = new MutationObserver((mutationsList) => {
  for (const mutation of mutationsList) {
    if (mutation.type === 'characterData' || mutation.type === 'childList') {
      //console.log('El texto o contenido cambió:', textoDelBoton.textContent);
        if(textoDelBoton.textContent === "New..." || textoDelBoton.textContent === "Start"){
            chatmsg.disabled = true;
        }else{
            chatmsg.disabled = false;
            chatmsg.focus();
            if(textoDelBoton.textContent === "Stop"){
            chatmsg.value = "";
            }
        }
    }
  }
});

// Configuramos qué queremos observar (en este caso, cambios en el texto o hijos del nodo)
const config = {
  characterData: true, // Cambios en nodos de texto
  childList: true, // Cambios en los nodos hijos
  subtree: true,   // Observar también los descendientes
};

// Iniciamos el observer en el elemento seleccionado
observer.observe(textoDelBoton, config);

// Ejemplo para desconectar el observer si ya no lo necesitas
// observer.disconnect();

document.getElementsByTagName("style")[0].innerHTML = '*{box-sizing:border-box; margin:0}body{padding-top:73px}body,html{min-height:100vh;min-width:100vw;min-width:100dvw;min-height:100dvh;display:flex;flex-direction:column;align-items:center;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";overflow-x:hidden;overflow-y:auto}html{background:#fff7ee}a{color:#00f}.dark-mode a{color:#337dff}.noSelect{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.noSelect:focus{outline:0!important}.outlined{border:1px solid #ccc;border-radius:.1em;box-shadow:inset 0 0 .2em #bbb!important}.dark-mode{background:#030303!important;color-scheme:dark}.dark-mode .outlined{border-color:#141414!important;box-shadow:inset 0 0 0 #bbb!important}.footer{text-align:center}header{height:73px;display:flex;width:100%;background:#fff;box-shadow:#ccc 0 4px 12px 0;padding:8px;align-items:center;justify-content:space-between;position:fixed;top:0;left:0;z-index:1000}.center{display:flex;align-items:center;justify-content:center}.openBoost{padding:5px;user-select:none;cursor:pointer}.rightSide{gap:8px}.openBoost{display:flex;flex-direction:column;justify-content:center;align-items:flex-end}.userCount{display:flex;align-items:flex-end;gap:5px;font-size:1.5em;color:#9ec9ff;align-items:flex-end;justify-content:flex-end;vertical-align:bottom}#countNumber{font-size:1.33em;font-weight:700;color:#6bb5ff;vertical-align:bottom;margin-top:auto;display:flex;align-items:flex-end;justify-content:flex-end;line-height:35px}.dark-mode header{background:#0a0a0a!important;color:#fff;box-shadow:0 0 0 #ccc}.dark-mode .tagline{filter:invert(100%)}header div{display:flex;align-items:center;gap:70px}.switch{position:relative;display:inline-block;width:50px;height:25px;user-select:none}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;display:flex;align-items:center;justify-content:space-between;padding:0 0}.slider:before{content:"";position:absolute;height:21px;width:21px;left:2px;bottom:2px;background-color:#fff;border-radius:50%;z-index:5;opacity:.95}input:checked+.slider{background-color:#292929}input:checked+.slider:before{transform:translateX(25px)}.icon{color:#fff;font-size:15px;z-index:3;border:none!important}.sun{display:block}.moon{display:block}input:checked+.slider .moon{opacity:0;visibility:hidden}input:not(:checked)+.slider .sun{opacity:0;visibility:hidden}.slider.round{border-radius:30px}.logo{margin-left:5px}.openBoost{margin-left:auto;font-weight:700;margin-right:5px;font-size:20px;gap:0;-webkit-tap-highlight-color:transparent}.underBar{height:5px;width:100%;background:#ffc400!important;border-radius:5px;z-index:30000;margin-right:auto}.social{display:flex;align-items:center;color:#fff;gap:6px;padding:8px;border-radius:10px;user-select:none;cursor:pointer;text-decoration:none}.discord{background:#3f51b5}.headerDiscord{gap:0!important;padding:6px!important}@media (max-width:1200px){.headerDiscord{display:none!important}}@media (max-width:800px){.tagline{display:none}}@media (max-width:600px){.openBoost{margin-top:20px}.logo{min-width:0;width:calc(100vw - 100px);max-width:200px;margin-left:0}header{display:flex;align-items:center;max-width:100vw}.icon{font-size:.8em}.slider:before{width:16px;height:16px;bottom:2px;left:2px}.switch{width:45px;height:20px}input:checked+.slider:before{transform:translateX(25px)}.userCount{gap:0}.onlineText{display:none}.rightSide{display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-end;gap:0;margin-right:10px}}.home{background:#fff;width:738px;display:flex;flex-direction:column;gap:20px;margin-top:30px;padding:20px;box-shadow:inset 0 0 .5em #bbb;border-radius:10px;font-size:16px;text-align:left;align-items:flex-start;line-height:1.5}#donate-button-container{margin-left:auto;margin-right:auto}.socials{align-items:center;justify-content:center;flex-direction:column;gap:5px}.sideBySide{display:flex}.adLink{margin-left:auto;margin-right:auto}@media (max-width:800px){.sideBySide{flex-direction:column-reverse;gap:20px}.socials{flex-direction:row}}.exclamation{width:25px;height:25px;background:#ff7f01;border-radius:8px;font-size:27px;display:flex;align-items:center;justify-content:center;color:#fff;line-height:25px;text-align:center}.exclamation span{position:relative;top:-1px}.dark-mode .home{background:#0a0a0a!important;color:rgba(255,255,255,.9);box-shadow:#3e4446 0 0 .1em inset}.dark-mode .warning{border-color:#3e4446;box-shadow:#2a2e2f 0 0 .75em;background-image:initial;background-color:#2a2e2f}.dark-mode .interestContainer{background:#2a2e2f;color:#fff;border:1px solid #5c5c5c}.dark-mode .warning a{color:#337dff}.warning a{color:#00f;font-size:15px}.choiceButton{width:124px;height:50px;border-radius:5px;background:linear-gradient(to top,#0180fe,#80bfff);color:#fff!important;display:flex;align-items:center;justify-content:center;text-decoration:none;font-size:24px}.monitoredSec1{display:flex;align-items:center;font-size:1.5em;font-weight:700;gap:5px}.footer{font-size:.8em;color:grey;margin:6px 0 50px 0;max-width:80vw}.home .discord img{width:21px;gap:5px}.discord{background:#3f51b5}.reddit{background:#ff5722}.instagram{background:#dd2a7b}.tiktok{background:#000}.social{display:flex;align-items:center;color:#fff;gap:6px;padding:8px;border-radius:10px;user-select:none;cursor:pointer;text-decoration:none}.socials{display:flex;gap:10px}.socials a{color:#fff}.interestHeader{font-size:1.25em}.warning{background-color:red;border-radius:.5em;border:1px solid #ccc;box-shadow:0 0 .75em #bfdeff;padding:2px 80px 2px 80px;margin:auto;display:flex;align-items:center;flex-direction:column;flex-wrap:wrap;justify-content:center;background:#bfdeff;text-align:center}.interestContainer{position:relative;gap:5px;padding:5px;border:1px solid #e3e3e5;border-radius:5px;background-color:#f7f7f7;width:400px;min-height:50px}.mCenter{margin-left:auto;margin-right:auto}textarea{border:none;outline:0;background-color:transparent;resize:none;font-size:15px;field-sizing:content}.interaction{display:flex;gap:10px;max-width:100%}.choices{display:flex;align-items:center;gap:5px}.interestInfo{width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;top:0;pointer-events:none;color:grey}.interestDiv{display:flex;flex-direction:column;gap:8px}.interestWord{padding:10px;padding-right:0}.chatChoices{display:flex;flex-direction:column;gap:-5px}.interestsEnter{cursor:text;display:flex;flex-wrap:wrap;align-items:flex-start;gap:5px;width:100%;height:100%}.interestTag{background-color:#6cb5ff;display:flex;align-items:center;line-height:5px;border-radius:5px;text-align:center;font-weight:500;font-size:16px;color:#000}.removeInterest{color:#000;font-weight:700;cursor:pointer;padding:10px}#lastUpdate,.interaction,.socials,.warning,h1{margin-left:auto!important;margin-right:auto!important;text-align:center}.italic{font-style:italic}@media (max-width:800px){.home{width:92vw;padding:0;margin-top:20px;padding:20px;padding-bottom:20px;padding-top:20px}.interestDiv{width:100%;align-items:center}.interaction{flex-direction:column-reverse;align-items:center;width:100%}.interaction{order:-5!important}.warning{order:-4!important;font-size:16px;margin:0;padding:8px}.interestContainer{width:95%;min-height:60px}.sideBySide{order:-3!important}.socials{flex-wrap:wrap;align-items:center;justify-content:center}.ending{display:none}}';

})();
